import{n as b,q as k,s as $,d as w,h as F,i as L,c as n,u as i,e as x,j as N,b as p,F as _,f as M,o,v as j,t as R}from"./index-0204c66f.js";import{Q as B,u as O,a as Q,L as C,_ as I}from"./ErrorComponent.vue_vue_type_script_setup_true_lang-a1b8f0de.js";class V extends B{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,s){super.setOptions({...e,behavior:b()},s)}getOptimisticResult(e){return e.behavior=b(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,s){var r,u,d,l,h,P;const{state:a}=e,f=super.createResult(e,s),{isFetching:g,isRefetching:c}=f,v=g&&((r=a.fetchMeta)==null||(u=r.fetchMore)==null?void 0:u.direction)==="forward",y=g&&((d=a.fetchMeta)==null||(l=d.fetchMore)==null?void 0:l.direction)==="backward";return{...f,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:k(s,(h=a.data)==null?void 0:h.pages),hasPreviousPage:$(s,(P=a.data)==null?void 0:P.pages),isFetchingNextPage:v,isFetchingPreviousPage:y,isRefetching:c&&!v&&!y}}}function T(t,e,s){return O(V,t,e,s)}const m={all:["todo"],user:{all:()=>[...m.all,"user"],id:t=>[...m.user.all(),t]},id:t=>[...m.all,t]};function q(t){return fetch(`https://jsonplaceholder.typicode.com/todos/${t}`).then(e=>e.json())}function E(){return fetch("https://jsonplaceholder.typicode.com/todos").then(t=>t.json())}function K(t){return fetch(`https://jsonplaceholder.typicode.com/users/${t}/todos`).then(e=>e.json())}const U={get:q,getAll:E,getFromUserId:K};function z(t){return T({queryKey:m.user.id(t),queryFn:()=>U.getFromUserId(t.value),getNextPageParam:()=>!0})}const A={key:2,class:"todo-wrapper"},D={class:"todo-list"},G=w({__name:"TodoListView",setup(t){const e=F(),s=L(()=>Number(e.params.id)),{data:r,isLoading:u,isError:d,error:l,fetchNextPage:h}=z(s);return(P,a)=>(o(),n(_,null,[i(u)?(o(),x(C,{key:0})):i(d)?(o(),x(Q,{key:1,error:i(l)},null,8,["error"])):N("",!0),i(r)?(o(),n("div",A,[p("ul",D,[(o(!0),n(_,null,M(i(r).pages,(f,g)=>(o(),n(_,{key:g},[(o(!0),n(_,null,M(f,c=>(o(),n("li",{key:c.id,class:"todo-element"},[p("div",{class:j({dot:!0,done:c.completed})},null,2),p("span",null,R(c.title),1)]))),128))],64))),128))]),p("button",{class:"load-button",onClick:a[0]||(a[0]=()=>i(h)())},"Load more")])):N("",!0)],64))}});const J=I(G,[["__scopeId","data-v-fdcb6cb6"]]);export{J as default};
